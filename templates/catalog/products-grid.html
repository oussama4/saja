{% load static i18n wagtailcore_tags wagtailimages_tags %}

<div class="uk-width-expand">
	<div class="uk-grid-medium uk-child-width-1-1" uk-grid>
		<!--items-->
		<div>
			<div class="uk-card uk-card-default uk-card-small tm-ignore-container">
				<div class="uk-grid-collapse uk-child-width-1-1" id="products" uk-grid="uk-grid">
					<!---settings-->
					<div class="uk-card-header">
						<div class="uk-grid-small uk-flex-middle" uk-grid="uk-grid">
							<!--Sorting-->
							<div
								class="uk-width-1-1 uk-width-expand@s uk-flex uk-flex-center uk-flex-left@s uk-text-small">
								<button class="uk-button uk-button-default">
								  <span class="uk-margin-xsmall-right uk-icon uk-text-uppercase" 
									uk-icon="icon: settings; ratio: .75;"></span>
								  {% trans "Trier par" %}
								</button>
								<div uk-dropdown="mode: click">
									<ul class="uk-nav uk-dropdown-nav">
										<li> <a href="{% pageurl page %}?order=title_asc">
												{% trans "Titre, A à Z" %} 
											</a> </li>
											<li> <a href="{% pageurl page %}?order=title_desc">
												{% trans "Titre, Z à A" %}
											</a> </li>
											<li> <a href="{% pageurl page %}?order=price_asc">
												{% trans "Prix, croissant" %}
											</a> </li>
											<li> <a href="{% pageurl page %}?order=price_desc">
												{% trans "Prix, décroissant" %}
											</a> </li>
									</ul>
								</div>
							</div>
							<!-- Filters button & change view-->
							<div class="uk-width-1-1 uk-width-auto@s uk-flex uk-flex-center uk-flex-middle">
								<!--//- Filters button-->
								<!-- //- Change view-->
								<div class="tm-change-view uk-margin-small-left">
									<ul class="uk-subnav uk-iconnav js-change-view" uk-switcher="uk-switcher">
										<li><a class="uk-active" id="id" onclick='toggle(this)' data-view="grid"
												uk-icon="grid" uk-tooltip="Grid"></a></li>
										<li><a data-view="list" onclick="toggle(this)" uk-icon="list"
												uk-tooltip="List"></a></li>
									</ul>
								</div>
							</div>
						</div>
					</div>


					<!--ITEMS-->

					<div class="uk-grid-margin uk-first-column">
						<div class="uk-grid-collapse uk-child-width-1-3 tm-products-grid js-products-grid"
							uk-grid="uk-grid">
							{% for product in products %}
								{% include "partials/product_card.html" with product=product %}
							{% endfor %}
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!--PAGINATION-->
	<div class="uk-margin">
		{%if products.paginator.num_pages > 1%}
		<ul class="uk-pagination uk-flex-center">
			{% if products.has_previous %}
			<li><a href="?page={{ products.previous_page_number }}"><span uk-pagination-previous></span><a></li>
			{% endif %}
			{% for page in products.paginator.page_range %}
			{% if page == products.number %}
			<li class=" uk-active"><a href="?page={{page}}">{{ page }}</a></li>
			{% elif page > products.number|add:'-4' and page < products.number|add:'4' %}
			<li><a href="?page={{ page }}">{{page}}</a></li>
			{% endif %}
			{% endfor %}
			{% if products.has_next  %}
			<li><a href="?page={{ products.next_page_number }}"><span uk-pagination-next></span></a></li>
			{% endif %}
		</ul>
		{% endif %}
	</div>

</div>
